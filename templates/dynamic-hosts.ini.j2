# ================================================================
# AUTO-GENERATED by playbooks/tasks/create-gcp.yml — do not edit manually
# Generated: {{ ansible_date_time.iso8601 }}
# ================================================================

[all]
{% for node in node_info %}
{{ node.name }} ansible_host={{ node.external_ip }} ip={{ node.internal_ip }} ansible_user={{ ssh_user }}
{% endfor %}

# ── Role groups — built from node_groups config ───────────────────
[kube_control_plane]
{% for node in node_info | selectattr('role', 'equalto', 'master') %}
{{ node.name }}
{% endfor %}

[etcd]
{% for node in node_info | selectattr('role', 'equalto', 'master') %}
{{ node.name }}
{% endfor %}

[kube_node]
{% for node in node_info | selectattr('role', 'equalto', 'worker') %}
{{ node.name }}
{% endfor %}

[k8s_cluster:children]
kube_control_plane
kube_node

# ── Per-role convenience groups (one per node_groups entry) ───────
{% for group in node_groups %}
[{{ group.role }}s]
{% for node in node_info | selectattr('role', 'equalto', group.role) %}
{{ node.name }}
{% endfor %}

{% endfor %}

[all:vars]
ansible_ssh_private_key_file={{ ssh_private_key }}
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_python_interpreter=/usr/bin/python3

