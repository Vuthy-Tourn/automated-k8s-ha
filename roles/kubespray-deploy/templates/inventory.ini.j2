# ================================================================
# AUTO-GENERATED by Ansible — do not edit manually
# Generated from GCP VM IPs at provision time
# ================================================================

[all:vars]
ansible_user={{ ssh_user }}
ansible_ssh_extra_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_python_interpreter=/usr/bin/python3

# ── Control Plane (masters) ───────────────────────────────────────
[kube_control_plane]
{% set masters = node_groups | selectattr('role', 'equalto', 'master') | list %}
{% for node in masters %}
{% if loop.first %}
# master1 uses ansible_connection=local — it IS the node running ansible-playbook
{{ node.name }} ansible_host={{ node.internal_ip }} ansible_connection=local
{% else %}
{{ node.name }} ansible_host={{ node.internal_ip }}
{% endif %}
{% endfor %}

# ── etcd follows control plane ────────────────────────────────────
[etcd:children]
kube_control_plane

# ── Workers ───────────────────────────────────────────────────────
[kube_node]
{% set workers = node_info | selectattr('role', 'equalto', 'worker') | list %}
{% for node in workers %}
{{ node.name }} ansible_host={{ node.internal_ip }}
{% endfor %}

# ── Cluster group ─────────────────────────────────────────────────
[k8s_cluster:children]
kube_control_plane
kube_node
